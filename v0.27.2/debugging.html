<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Debugging - PyO3 user guide</title>


        <!-- Custom HTML head -->

        <meta name="description" content="PyO3 user guide">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/tabs.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">PyO3 user guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/PyO3/pyo3/tree/main/guide" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/PyO3/pyo3/edit/main/guide/src/debugging.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="debugging"><a class="header" href="#debugging">Debugging</a></h1>
<h2 id="macros"><a class="header" href="#macros">Macros</a></h2>
<p>PyO3's attributes (<code>#[pyclass]</code>, <code>#[pymodule]</code>, etc.) are <a href="https://doc.rust-lang.org/reference/procedural-macros.html">procedural macros</a>, which means that they rewrite the source of the annotated item. You can view the generated source with the following command, which also expands a few other things:</p>
<pre><code class="language-bash">cargo rustc --profile=check -- -Z unstable-options --pretty=expanded &gt; expanded.rs; rustfmt expanded.rs
</code></pre>
<p>(You might need to install <a href="https://github.com/rust-lang-nursery/rustfmt">rustfmt</a> if you don't already have it.)</p>
<p>You can also debug classic <code>!</code>-macros by adding <code>-Z trace-macros</code>:</p>
<pre><code class="language-bash">cargo rustc --profile=check -- -Z unstable-options --pretty=expanded -Z trace-macros &gt; expanded.rs; rustfmt expanded.rs
</code></pre>
<p>Note that those commands require using the nightly build of rust and may occasionally have bugs. See <a href="https://github.com/dtolnay/cargo-expand">cargo expand</a> for a more elaborate and stable version of those commands.</p>
<h2 id="running-with-valgrind"><a class="header" href="#running-with-valgrind">Running with Valgrind</a></h2>
<p>Valgrind is a tool to detect memory management bugs such as memory leaks.</p>
<p>You first need to install a debug build of Python, otherwise Valgrind won't produce usable results. In Ubuntu there's e.g. a <code>python3-dbg</code> package.</p>
<p>Activate an environment with the debug interpreter and recompile. If you're on Linux, use <code>ldd</code> with the name of your binary and check that you're linking e.g. <code>libpython3.7d.so.1.0</code> instead of <code>libpython3.7.so.1.0</code>.</p>
<p><a href="https://raw.githubusercontent.com/python/cpython/master/Misc/valgrind-python.supp">Download the suppressions file for CPython</a>.</p>
<p>Run Valgrind with <code>valgrind --suppressions=valgrind-python.supp ./my-command --with-options</code></p>
<h2 id="getting-a-stacktrace"><a class="header" href="#getting-a-stacktrace">Getting a stacktrace</a></h2>
<p>The best start to investigate a crash such as an segmentation fault is a backtrace. You can set <code>RUST_BACKTRACE=1</code> as an environment variable to get the stack trace on a <code>panic!</code>. Alternatively you can use a debugger such as <code>gdb</code> to explore the issue. Rust provides a wrapper, <code>rust-gdb</code>, which has pretty-printers for inspecting Rust variables. Since PyO3 uses <code>cdylib</code> for Python shared objects, it does not receive the pretty-print debug hooks in <code>rust-gdb</code> (<a href="https://github.com/rust-lang/rust/issues/96365">rust-lang/rust#96365</a>). The mentioned issue contains a workaround for enabling pretty-printers in this case.</p>
<ul>
<li>Link against a debug build of python as described in the previous chapter</li>
<li>Run <code>rust-gdb &lt;my-binary&gt;</code></li>
<li>Set a breakpoint (<code>b</code>) on <code>rust_panic</code> if you are investigating a <code>panic!</code></li>
<li>Enter <code>r</code> to run</li>
<li>After the crash occurred, enter <code>bt</code> or <code>bt full</code> to print the stacktrace</li>
</ul>
<p>Often it is helpful to run a small piece of Python code to exercise a section of Rust.</p>
<pre><code class="language-console">rust-gdb --args python -c "import my_package; my_package.sum_to_string(1, 2)"
</code></pre>
<h2 id="setting-breakpoints-in-your-rust-code"><a class="header" href="#setting-breakpoints-in-your-rust-code">Setting breakpoints in your Rust code</a></h2>
<p>One of the preferred ways by developers to debug their code is by setting breakpoints. This can be achieved in PyO3 by using a debugger like <code>rust-gdb</code> or <code>rust-lldb</code> with your Python interpreter.</p>
<p>For more information about how to use both <code>lldb</code> and <code>gdb</code> you can read the <a href="https://lldb.llvm.org/use/map.html">gdb to lldb command map</a> from the lldb documentation.</p>
<h3 id="common-setup"><a class="header" href="#common-setup">Common setup</a></h3>
<ol>
<li>
<p>Compile your extension with debug symbols:</p>
<pre><code class="language-bash"># Debug is the default for maturin, but you can explicitly ensure debug symbols with:
RUSTFLAGS="-g" maturin develop

# For setuptools-rust users:
pip install -e .
</code></pre>
<blockquote>
<p><strong>Note</strong>: When using debuggers, make sure that <code>python</code> resolves to an actual Python binary or symlink and not a shim script. Some tools like pyenv use shim scripts which can interfere with debugging.</p>
</blockquote>
</li>
</ol>
<h3 id="debugger-specific-setup"><a class="header" href="#debugger-specific-setup">Debugger specific setup</a></h3>
<p>Depending on your OS and your preferences you can use two different debuggers, <code>rust-gdb</code> or <code>rust-lldb</code>.</p>
<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="Using rust-gdb">Using rust-gdb</button>
<button class="mdbook-tab" data-tabname="Using rust-lldb (for macOS users)">Using rust-lldb (for macOS users)</button>
</nav>
<div class="mdbook-tab-content" data-tabname="Using rust-gdb">
<ol>
<li>
<p>Launch rust-gdb with the Python interpreter:</p>
<pre><code class="language-bash">rust-gdb --args python
</code></pre>
</li>
<li>
<p>Once in gdb, set a breakpoint in your Rust code:</p>
<pre><code class="language-bash">(gdb) break your_module.rs:42
</code></pre>
</li>
<li>
<p>Run your Python script that imports and uses your Rust extension:</p>
<pre><code class="language-bash"># Option 1: Run an inline Python command
(gdb) run -c "import your_module; your_module.your_function()"

# Option 2: Run a Python script
(gdb) run your_script.py

# Option 3: Run pytest tests
(gdb) run -m pytest tests/test_something.py::TestName
</code></pre>
</li>
</ol>
</div>
<div class="mdbook-tab-content hidden" data-tabname="Using rust-lldb (for macOS users)">
<ol>
<li>
<p>Start rust-lldb with Python:</p>
<pre><code class="language-bash">rust-lldb -- python
</code></pre>
</li>
<li>
<p>Set breakpoints in your Rust code:</p>
<pre><code class="language-bash">(lldb) breakpoint set --file your_module.rs --line 42
</code></pre>
</li>
<li>
<p>Run your Python script:</p>
<pre><code class="language-bash"># Option 1: Run an inline Python command
(lldb) run -c "import your_module; your_module.your_function()"

# Option 2: Run a Python script
(lldb) run your_script.py

# Option 3: Run pytest tests
(lldb) run -m pytest tests/test_something.py::TestName
</code></pre>
</li>
</ol>
</div>
</div>
<h3 id="using-vs-code"><a class="header" href="#using-vs-code">Using VS Code</a></h3>
<p>VS Code with the Rust and Python extensions provides an integrated debugging experience:</p>
<ol>
<li>
<p>First, install the necessary VS Code extensions:</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer">Rust Analyzer</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb">CodeLLDB</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Python</a></li>
</ul>
</li>
<li>
<p>Create a <code>.vscode/launch.json</code> file with a configuration that uses the LLDB Debug Launcher:</p>
<pre><code class="language-json">{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Debug PyO3",
            "type": "lldb",
            "request": "attach",
            "program": "${workspaceFolder}/.venv/bin/python",
            "pid": "${command:pickProcess}",
            "sourceLanguages": [
                "rust"
            ]
        },
        {
            "name": "Launch Python with PyO3",
            "type": "lldb",
            "request": "launch",
            "program": "${workspaceFolder}/.venv/bin/python",
            "args": ["${file}"],
            "cwd": "${workspaceFolder}",
            "sourceLanguages": ["rust"]
        },
        {
            "name": "Debug PyO3 with Args",
            "type": "lldb",
            "request": "launch",
            "program": "${workspaceFolder}/.venv/bin/python",
            "args": ["path/to/your/script.py", "arg1", "arg2"],
            "cwd": "${workspaceFolder}",
            "sourceLanguages": ["rust"]
        },
        {
            "name": "Debug PyO3 Tests",
            "type": "lldb",
            "request": "launch",
            "program": "${workspaceFolder}/.venv/bin/python",
            "args": ["-m", "pytest", "tests/your_test.py::test_function", "-v"],
            "cwd": "${workspaceFolder}",
            "sourceLanguages": ["rust"]
        }
     ]
}
</code></pre>
<p>This configuration supports multiple debugging scenarios:</p>
<ul>
<li>Attaching to a running Python process</li>
<li>Launching the currently open Python file</li>
<li>Running a specific script with command-line arguments</li>
<li>Running pytest tests</li>
</ul>
</li>
</ol>
<!-- rumdl-disable MD029 - nested lists & code blocks false positive -->
<ol start="3">
<li>
<p>Set breakpoints in your Rust code by clicking in the gutter next to line numbers.</p>
</li>
<li>
<p>Start debugging:</p>
<ul>
<li>For attaching to a running Python process: First start the process, then select the "Debug PyO3" configuration and click Start Debugging (F5). You'll be prompted to select the Python process to attach to.</li>
<li>For launching a Python script: Open your Python script, select the "Launch Python with PyO3" configuration and click Start Debugging (F5).</li>
<li>For running with arguments: Select "Debug PyO3 with Args" (remember to edit the configuration with your actual script path and arguments).</li>
<li>For running tests: Select "Debug PyO3 Tests" (edit the test path as needed).</li>
</ul>
</li>
<li>
<p>When debugging PyO3 code:</p>
<ul>
<li>You can inspect Rust variables and data structures</li>
<li>Use the debug console to evaluate expressions</li>
<li>Step through Rust code line by line using the step controls</li>
<li>Set conditional breakpoints for more complex debugging scenarios</li>
</ul>
</li>
</ol>
<!-- rumdl-enable MD029 -->
<h3 id="advanced-debugging-configurations"><a class="header" href="#advanced-debugging-configurations">Advanced Debugging Configurations</a></h3>
<p>For advanced debugging scenarios, you might want to add environment variables or enable specific Rust debug flags:</p>
<pre><code class="language-json">{
    "name": "Debug PyO3 with Environment",
    "type": "lldb",
    "request": "launch",
    "program": "${workspaceFolder}/.venv/bin/python",
    "args": ["${file}"],
    "env": {
        "RUST_BACKTRACE": "1",
        "PYTHONPATH": "${workspaceFolder}"
    },
    "sourceLanguages": ["rust"]
}
</code></pre>
<h3 id="debugging-from-jupyter-notebooks"><a class="header" href="#debugging-from-jupyter-notebooks">Debugging from Jupyter Notebooks</a></h3>
<p>For Jupyter Notebooks run from VS Code, you can use the following helper functions to automate the launch configuration:</p>
<pre><code class="language-python">from pathlib import Path
import os
import json
import sys


def update_launch_json(vscode_config_file_path=None):
    """Update VSCode launch.json with the correct Jupyter kernel PID.

    Args:
        vscode_config_file_path (str, optional): Path to the .vscode/launch.json file.
            If not provided, will use the current working directory.
    """
    pid = get_jupyter_kernel_pid()
    if not pid:
        print("Could not determine Jupyter kernel PID.")
        return

    # Determine launch.json path
    if vscode_config_file_path:
        launch_json_path = vscode_config_file_path
    else:
        launch_json_path = os.path.join(Path(os.getcwd()), ".vscode", "launch.json")

    # Get Python interpreter path
    python_path = sys.executable

    # Default debugger config
    debug_config = {
        "version": "0.2.0",
        "configurations": [
            {
                "name": "Debug PyO3 (Jupyter)",
                "type": "lldb",
                "request": "attach",
                "program": python_path,
                "pid": pid,
                "sourceLanguages": ["rust"],
            },
            {
                "name": "Launch Python with PyO3",
                "type": "lldb",
                "request": "launch",
                "program": python_path,
                "args": ["${file}"],
                "cwd": "${workspaceFolder}",
                "sourceLanguages": ["rust"]
            }
        ],
    }

    # Create .vscode directory if it doesn't exist
    try:
        os.makedirs(os.path.dirname(launch_json_path), exist_ok=True)

        # If launch.json already exists, try to update it instead of overwriting
        if os.path.exists(launch_json_path):
            try:
                with open(launch_json_path, "r") as f:
                    existing_config = json.load(f)

                # Check if our configuration already exists
                config_exists = False
                for config in existing_config.get("configurations", []):
                    if config.get("name") == "Debug PyO3 (Jupyter)":
                        config["pid"] = pid
                        config["program"] = python_path
                        config_exists = True

                if not config_exists:
                    existing_config.setdefault("configurations", []).append(debug_config["configurations"][0])

                debug_config = existing_config
            except Exception:
                # If reading fails, we'll just overwrite with our new configuration
                pass

        with open(launch_json_path, "w") as f:
            json.dump(debug_config, f, indent=4)
        print(f"Updated launch.json with PID: {pid} at {launch_json_path}")
    except Exception as e:
        print(f"Error updating launch.json: {e}")


def get_jupyter_kernel_pid():
    """Find the process ID (PID) of the running Jupyter kernel.

    Returns:
        int: The process ID of the Jupyter kernel, or None if not found.
    """
    # Check if we're running in a Jupyter environment
    if 'ipykernel' in sys.modules:
        pid = os.getpid()
        print(f"Jupyter kernel PID: {pid}")
        return pid
    else:
        print("Not running in a Jupyter environment.")
        return None
</code></pre>
<p>To use these functions:</p>
<ol>
<li>Run the cell containing these functions in your Jupyter notebook</li>
<li>Run <code>update_launch_json()</code> in a cell</li>
<li>In VS Code, select the "Debug PyO3 (Jupyter)" configuration and start debugging</li>
</ol>
<h2 id="thread-safety-and-compiler-sanitizers"><a class="header" href="#thread-safety-and-compiler-sanitizers">Thread Safety and Compiler Sanitizers</a></h2>
<p>PyO3 attempts to match the Rust language-level guarantees for thread safety, but
that does not preclude other code outside of the control of PyO3 or buggy code
managed by a PyO3 extension from creating a thread safety issue. Analyzing
whether or not a piece of Rust code that uses the CPython C API is thread safe
can be quite complicated, since many Python operations can lead to arbitrary
Python code execution. Automated ways to discover thread safety issues can often
be more fruitful than code analysis.</p>
<p><a href="https://clang.llvm.org/docs/ThreadSanitizer.html">ThreadSanitizer</a> is a thread
safety checking runtime that can be used to detect data races triggered by
thread safety bugs or incorrect use of thread-unsafe data structures. While it
can only detect data races triggered by code at runtime, if it does detect
something the reports often point to exactly where the problem is happening.</p>
<p>To use <code>ThreadSanitizer</code> with a library that depends on PyO3, you will need to
install a nightly Rust toolchain, along with the <code>rust-src</code> component, since you
will need to compile the Rust standard library:</p>
<pre><code class="language-bash">rustup install nightly
rustup override set nightly
rustup component add rust-src
</code></pre>
<p>You will also need a version of CPython compiled using LLVM/Clang with the same
major version of LLVM as is currently used to compile nightly Rust. As of March
2025, Rust nightly uses LLVM 20.</p>
<p>The <a href="https://github.com/nascheme/cpython_sanity">cpython_sanity docker images</a>
contain a development environment with a pre-compiled version of CPython 3.13 or
3.14 as well as optionally NumPy and SciPy, all compiled using LLVM 20 and
ThreadSanitizer.</p>
<p>After activating a nightly Rust toolchain, you can build your project using
<code>ThreadSanitizer</code> with the following command:</p>
<pre><code class="language-bash">RUSTFLAGS="-Zsanitizer=thread" maturin develop -Zbuild-std --target x86_64-unknown-linux-gnu
</code></pre>
<p>If you are not running on an x86_64 Linux machine, you should replace
<code>x86_64-unknown-linux-gnu</code> with the <a href="https://doc.rust-lang.org/rustc/platform-support.html#tier-1-with-host-tools">target
triple</a>
that is appropriate for your system. You can also replace <code>maturin develop</code> with
<code>cargo test</code> to run <code>cargo</code> tests. Note that <code>cargo</code> runs tests in a thread
pool, so <code>cargo</code> tests can be a good way to find thread safety issues.</p>
<p>You can also replace <code>-Zsanitizer=thread</code> with <code>-Zsanitizer=address</code> or any of
the other sanitizers that are <a href="https://doc.rust-lang.org/beta/unstable-book/compiler-flags/sanitizer.html">supported by
Rust</a>. Note
that you'll need to build CPython from source with the appropriate <a href="https://docs.python.org/3/using/configure.html#cmdoption-with-address-sanitizer">configure
script
flags</a>
to use the same sanitizer environment as you want to use for your Rust
code.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="free-threading.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="features.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="free-threading.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="features.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/tabs.js"></script>



    </div>
    </body>
</html>
